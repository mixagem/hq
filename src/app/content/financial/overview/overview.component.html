<mat-progress-bar *ngIf="!evoReady" mode="indeterminate"></mat-progress-bar>
<!-- substituir progresss bar, por estrutura fixa, com base nas categorias que fizemos loading-->



<div *ngIf="evoReady" class="mhq-mainform-container">

  <div class="mhq-row mhq-mainform-header">
    <h1>
      <mat-icon>account_balance</mat-icon>Vista diária - {{selectedMonthLocale}} {{selectedYear}}
    </h1>
  </div>

  <h1 (click)="previousMonth()">previous</h1>
  <h1 (click)="nextMonth()">next</h1>

  <div class="mhq-row">

    <!-- categorias   -->
    <div class="mhq-col-2" style="padding-right:10px;padding-top: 40px;">

      <!-- categorias income  -->
      <div class="mhq-overview-incomecats-wrapper">

        <div *ngFor="let cat of categoriesService.incomeCategories" class="mhq-overview-cat-loop">
          <div class="mhq-overview-cat" *ngIf="cat.active"
            [ngStyle]="{'background-color':cat.bgcolor,'color':cat.textcolor}">
            <mat-icon>{{cat.icon}}</mat-icon>{{cat.title}}
          </div>

          <!-- subcategorias -->
          <div *ngFor="let subcat of cat.subcats">
            <div class="mhq-overview-sub-cat" *ngIf="subcat.active && cat.active"
              [ngStyle]="{'background-color':cat.bgcolor,'color':cat.textcolor,'opacity':'.7'}">
              {{subcat.title}}
            </div>
          </div>

        </div>

      </div>

      <!-- categorias expense -->
      <div class="mhq-overview-expensecats-wrapper">

        <div *ngFor="let cat of categoriesService.expenseCategories" class="mhq-overview-cat-loop">
          <div class="mhq-overview-cat" *ngIf="cat.active"
            [ngStyle]="{'background-color':cat.bgcolor,'color':cat.textcolor}">
            <mat-icon>{{cat.icon}}</mat-icon>{{cat.title}}
          </div>

          <!-- subcategorias -->
          <div *ngFor="let subcat of cat.subcats">
            <div class="mhq-overview-sub-cat" *ngIf="subcat.active && cat.active"
              [ngStyle]="{'background-color':cat.bgcolor,'color':cat.textcolor,'opacity':'.7'}">
              {{subcat.title}}
            </div>
          </div>

        </div>

      </div>

      <!-- categorias totais -->
      <div class="mhq-overview-totals-wrapper">

        <div class="mhq-overview-cat">
          <mat-icon>euro</mat-icon>Total diário
        </div>

        <div class="mhq-overview-cat">
          <mat-icon>euro</mat-icon>Total acomulado
        </div>

      </div>

      <!-- fim categorias -->
    </div>

    <!-- celulas com valores -->
    <!-- <div class="mhq-col-10"> -->
    <div class="mhq-col-10">
      <ng-scrollbar style="width: 100%;height:100%;" [track]="'horizontal'" [position]="'invertX'" [trackClass]="'overview-scrollbar'">
        <div style="width: auto;overflow-y: visible;">
          <!-- cabeçalho com dias do mês  -->
          <div style="display: inline-flex;">
            <div *ngFor="let null of tempArray let i = index" class="mhq-overview-calendar-days">{{i+1}}</div>
          </div>

          <!-- células income -->
          <div class="mhq-overview-incomecells-wrapper">

            <div *ngFor="let cat of categoriesService.incomeCategories" class="mhq-overview-cat-loop">

              <div *ngIf="cat.active">
                <div style="height: 40px;display: flex;margin-top:10px;display:inline-flex">
                  <div *ngFor="let null of tempArray let i = index" class="mhq-overview-cat-cell mhq-cell-not-empty"
                    [ngStyle]="{'background-color':cat.bgcolor,'color':cat.textcolor,'opacity':'0.65'}"
                    (click)="showDailyCatDetails(cat.id,i+1)">
                    {{getCatValue(i+1,cat.id)}}</div>
                </div>

                <div *ngFor="let subcat of cat.subcats">
                  <div *ngIf="subcat.active" style="display:inline-flex">
                    <div *ngFor="let null of tempArray let i = index" class="mhq-overview-subcat-cell"
                      [ngClass]="getSubcatValue(i+1,subcat.id) !== 0 ? 'mhq-cell-not-empty' : 'mhq-empty-cell'"
                      [ngStyle]="getSubcatValue(i+1,subcat.id) === 0 ?
                {'background-color':cat.bgcolor,'color':'transparent','opacity':'0.25'}
                  :{'background-color':cat.bgcolor,'color':cat.textcolor,'opacity':'.9'}"
                      (click)="showDailySubCatDetails(subcat.id,i+1)">
                      {{getSubcatValue(i+1,subcat.id)}}</div>
                  </div>
                </div>

              </div>

            </div>

          </div>

          <!-- células expense -->
          <div class="mhq-overview-expensecells-wrapper">

            <div *ngFor="let cat of categoriesService.expenseCategories" class="mhq-overview-cat-loop">

              <div *ngIf="cat.active" class="mhq-overview-cells-warpper">
                <div style="display:inline-flex;margin-top:10px;">
                  <div *ngFor="let null of tempArray let i = index" class="mhq-overview-cat-cell mhq-cell-not-empty"
                    [ngStyle]="{'background-color':cat.bgcolor,'color':cat.textcolor,'opacity':'0.65'}"
                    (click)="showDailyCatDetails(cat.id,i+1)">
                    {{getCatValue(i+1,cat.id)}}</div>
                </div>

                <div *ngFor="let subcat of cat.subcats">
                  <div *ngIf="subcat.active" style="display:inline-flex">
                    <div *ngFor="let null of tempArray let i = index" class="mhq-overview-subcat-cell"
                      [ngClass]="getSubcatValue(i+1,subcat.id) !== 0 ? 'mhq-cell-not-empty' : 'mhq-empty-cell'"
                      [ngStyle]="getSubcatValue(i+1,subcat.id) === 0 ?
                {'background-color':cat.bgcolor,'color':'transparent','opacity':'0.25'}
                  :{'background-color':cat.bgcolor,'color':cat.textcolor,'opacity':'.9'}"
                      (click)="showDailySubCatDetails(subcat.id,i+1)">
                      {{getSubcatValue(i+1,subcat.id)}}</div>
                  </div>
                </div>

              </div>

            </div>

          </div>

          <!-- células totais -->
          <div class="mhq-overview-totals-cells-wrapper">

            <div style="display:inline-flex">
              <div *ngFor="let null of tempArray let i = index" class="mhq-overview-cat-cell mhq-cell-not-empty"
                (click)="showDailySumDetails(i+1)">
                {{dailySumEvolution[i]}}</div>
            </div>

            <div style="display:inline-flex">
              <div *ngFor="let null of tempArray let i = index" class="mhq-overview-cat-cell">
                {{dailySumAcomEvolution[i]}}</div>
            </div>

          </div>

        </div>
      </ng-scrollbar>
      <!--  fim celulas com valores -->
    </div>

  </div>

</div>