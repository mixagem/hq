<mat-progress-bar *ngIf="!gridReady" mode="indeterminate" color="accent"></mat-progress-bar>

<!-- navegação calendário -->
<div class="mhq-row mhq-monthly-grid-nav">

  <button mat-icon-button color="primary" [matMenuTriggerFor]="changeViewMenu">
    <mat-icon>visibility</mat-icon>
  </button>

  <button mat-icon-button color="primary" (click)="changeMonth(-1)">
    <mat-icon>arrow_back_ios_new</mat-icon>
  </button>

  <span id="mhq-grid-subtitle">{{gridSubtitle}}</span>

  <button mat-icon-button color="primary" (click)="changeMonth(1)">
    <mat-icon>arrow_forward_ios_new</mat-icon>
  </button>

  <button mat-icon-button color="primary" (click)="changeMonth(0)">
    <mat-icon>today</mat-icon>
  </button>

  <mat-menu #changeViewMenu="matMenu">
    <button mat-menu-item disabled>
      <mat-icon>calendar_month</mat-icon>
      <span>Vista mensal</span>
    </button>
    <button mat-menu-item disabled>
      <mat-icon>calendar_month</mat-icon>
      <span>Vista anual</span>
    </button>
    <button mat-menu-item disabled>
      <mat-icon>calendar_month</mat-icon>
      <span>Vista década</span>
    </button>
  </mat-menu>

</div>

<!-- calendário -->
<div class="mhq-row">
  <div class="mhq-col-2" style="height: 30px;"></div>
  <div class="mhq-col-10">
    <!-- loop para cabeçalho com o calendario -->
    <div class="mhq-row">
      <div *ngFor="let x of placeholder; let i = index;"
        style="width:100%;height:30px;color:coral;display: flex;align-items: center;justify-content: center;font-weight: 600;font-size:18px;">
        {{i+1}}</div>
    </div>
  </div>
</div>

<!-- grelha (para envolver em scroll bar quando necessário) -->
<div *ngIf="gridReady" id="mhq-grid-wrapper" class="mhq-row">

  <!-- títulos de categorias -->
  <div id="mhq-grid-categories-wrapper" class="mhq-col-2">
    <mat-spinner *ngIf="!areCategoriesReady" color="accent" style="margin:auto"></mat-spinner>

    <div *ngIf="areCategoriesReady">

      <!-- loop para categorias  -->
      <div *ngFor="let cat of activeCategories">
        <div [style]="miscService.getCategoryStyles(cat.id)" style="height:40px;">
          <mat-icon>{{cat.icon}}</mat-icon>{{cat.title}}
        </div>

        <!-- loop para sub categorias  -->
        <div *ngFor="let subcat of cat.subcats">
          <div *ngIf="subcat.active" [style]="miscService.getCategoryStyles(cat.id)" style="opacity: .8;height:30px">
            {{subcat.title}}</div>
        </div>

      </div>

    </div>

  </div>

  <!--  celulas para valores do snapshot  -->
  <div id="mhq-grid-cells-wrapper" class="mhq-col-10">
    <mat-spinner *ngIf="!areCategoriesReady" color="accent" style="margin:auto"></mat-spinner>

    <div *ngIf="areCategoriesReady">

      <!-- loop para celuluas diárias  -->
      <div class="mhq-row" *ngFor="let cat of activeCategories" style="flex-wrap: wrap;">

        <!-- celulas da categoria -->
        <div class="mhq-row">
          <div *ngFor="let x of placeholder; let i = index;"
            style="width:100%;height:40px;background-color:rgb(0, 144, 201);border:1px solid gray;box-sizing:border-box">
            {{monthlySnapshots.categories[cat.id][i]}}
          </div>
        </div>

        <!-- celulas da sub categoria -->
        <div class="mhq-row" *ngFor="let subcat of cat.subcats">
          <div *ngFor="let x of placeholder; let i = index;" style="width:100%;">
            <div *ngIf="subcat.active"
              style="width:100%;height:30px;background-color:rgb(159, 222, 247);border:1px solid gray;box-sizing:border-box">
              {{monthlySnapshots.subcategories[subcat.id][i]}}</div>
          </div>
        </div>

      </div>

    </div>

  </div>

</div>